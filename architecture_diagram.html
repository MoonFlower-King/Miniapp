<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>çŸ¥å² (ZhiSui) - è½¯ä»¶æ¶æ„å›¾</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({ startOnLoad: true });</script>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            padding: 20px;
        }

        h1 {
            color: #333;
        }

        .mermaid {
            margin-top: 30px;
        }
    </style>
</head>

<body>
    <h1>ğŸ‹ çŸ¥å² (ZhiSui) - è½¯ä»¶æ¶æ„å›¾</h1>
    <p>MVC åˆ†å±‚æ¶æ„ (Model - View - Controller)</p>

    <div class="mermaid">
        graph TD
        subgraph User_Layer [ç”¨æˆ·äº¤äº’å±‚]
        direction TB
        User((ç”¨æˆ·))
        MA[MainContainerActivity<br />(ä¸»å®¹å™¨)]
        end

        subgraph View_Controller [è§†å›¾ä¸æ§åˆ¶å±‚]
        direction TB
        VP[ViewPager2]

        subgraph Fragments
        L_Frag[LedgerFragment<br />(è®°è´¦é¡µ)]
        T_Frag[TaskFragment<br />(æ¸…å•é¡µ)]
        A_Frag[AiFragment<br />(AIé¡µ)]
        end

        subgraph Adapters
        TrAd[TransactionAdapter]
        ToAd[TodoAdapter]
        end
        end

        subgraph Logic_Service [ä¸šåŠ¡é€»è¾‘å±‚]
        AM[AiManager<br />(ç½‘ç»œè¯·æ±‚)]
        CL[CalendarLogic]
        end

        subgraph Data_Layer [æ•°æ®æŒä¹…å±‚]
        DB[(SQLite Database<br />DatabaseHelper)]
        SP[SharedPreferences<br />(é…ç½®)]
        API[DeepSeek API<br />(äº‘ç«¯)]
        end

        %% Relationships
        User --> MA
        MA --> VP
        VP --> L_Frag
        VP --> T_Frag
        VP --> A_Frag

        L_Frag --> TrAd
        L_Frag --> DB

        T_Frag --> ToAd
        T_Frag --> DB
        T_Frag --> SP

        A_Frag --> AM
        AM --> API

        TrAd -.-> DB
        ToAd -.-> DB

        style User_Layer fill:#e3f2fd,stroke:#2196f3
        style View_Controller fill:#e8f5e9,stroke:#4caf50
        style Logic_Service fill:#fff3e0,stroke:#ff9800
        style Data_Layer fill:#f3e5f5,stroke:#9c27b0
    </div>
</body>

</html>